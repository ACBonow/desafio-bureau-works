{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelText as _vModelText, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between align-items-center mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"d-flex align-items-center\"\n};\nconst _hoisted_4 = {\n  class: \"me-3\"\n};\nconst _hoisted_5 = {\n  class: \"form-label me-2\"\n};\nconst _hoisted_6 = {\n  class: \"btn btn-secondary\"\n};\nconst _hoisted_7 = {\n  class: \"mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"form-label\"\n};\nconst _hoisted_9 = {\n  class: \"mb-3\"\n};\nconst _hoisted_10 = {\n  class: \"form-label\"\n};\nconst _hoisted_11 = {\n  class: \"mb-3\"\n};\nconst _hoisted_12 = {\n  class: \"form-label\"\n};\nconst _hoisted_13 = {\n  class: \"mb-3\"\n};\nconst _hoisted_14 = {\n  class: \"form-label\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TableView = _resolveComponent(\"TableView\");\n  const _component_Pagination = _resolveComponent(\"Pagination\");\n  const _component_ModalView = _resolveComponent(\"ModalView\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, _toDisplayString(_ctx.$t('document.title')), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"label\", _hoisted_5, _toDisplayString(_ctx.$t('common.itemsPerPage')), 1 /* TEXT */), _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-select form-select-sm d-inline-block w-auto\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.documents.size = $event),\n    onChange: _cache[1] || (_cache[1] = $event => $options.loadDocuments(0))\n  }, _cache[8] || (_cache[8] = [_createElementVNode(\"option\", {\n    value: \"5\"\n  }, \"5\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"10\"\n  }, \"10\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"20\"\n  }, \"20\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"50\"\n  }, \"50\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.documents.size]])]), _createElementVNode(\"button\", {\n    class: \"btn btn-primary me-2\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.showAddModal && $options.showAddModal(...args))\n  }, _toDisplayString(_ctx.$t('document.newDocument')), 1 /* TEXT */), _createElementVNode(\"label\", _hoisted_6, [_createTextVNode(_toDisplayString(_ctx.$t('common.uploadCSV')) + \" \", 1 /* TEXT */), _createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \".csv\",\n    class: \"d-none\",\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args))\n  }, null, 32 /* NEED_HYDRATION */)])])]), _createVNode(_component_TableView, {\n    headers: $data.headers,\n    fields: $data.fields,\n    items: $data.documents.content,\n    actions: $data.actions,\n    currentPage: $data.documents.number,\n    pageSize: $data.documents.size\n  }, null, 8 /* PROPS */, [\"headers\", \"fields\", \"items\", \"actions\", \"currentPage\", \"pageSize\"]), _createVNode(_component_Pagination, {\n    currentPage: $data.documents.number,\n    totalPages: $data.documents.totalPages,\n    first: $data.documents.first,\n    last: $data.documents.last,\n    onChange: $options.changePage\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"first\", \"last\", \"onChange\"]), $data.showModal ? (_openBlock(), _createBlock(_component_ModalView, {\n    key: 0,\n    title: $data.editingDocument.id ? _ctx.$t('document.editDocument') : _ctx.$t('document.newDocument'),\n    onClose: $options.closeModal,\n    onSave: $options.saveDocument\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"form\", null, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"label\", _hoisted_8, _toDisplayString(_ctx.$t('document.subject')), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.editingDocument.subject = $event),\n      type: \"text\",\n      class: \"form-control\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingDocument.subject]])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"label\", _hoisted_10, _toDisplayString(_ctx.$t('document.content')), 1 /* TEXT */), _withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.editingDocument.content = $event),\n      class: \"form-control\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingDocument.content]])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"label\", _hoisted_12, _toDisplayString(_ctx.$t('document.locale')), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.editingDocument.locale = $event),\n      type: \"text\",\n      class: \"form-control\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingDocument.locale]])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"label\", _hoisted_14, _toDisplayString(_ctx.$t('document.author')), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.editingDocument.author = $event),\n      type: \"text\",\n      class: \"form-control\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingDocument.author]])])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"title\", \"onClose\", \"onSave\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","_ctx","$t","_hoisted_3","_hoisted_4","_hoisted_5","_cache","$event","$data","documents","size","onChange","$options","loadDocuments","value","onClick","args","showAddModal","_hoisted_6","_createTextVNode","type","accept","handleFileUpload","_createVNode","_component_TableView","headers","fields","items","content","actions","currentPage","number","pageSize","_component_Pagination","totalPages","first","last","changePage","showModal","_createBlock","_component_ModalView","key","title","editingDocument","id","onClose","closeModal","onSave","saveDocument","default","_withCtx","_hoisted_7","_hoisted_8","subject","required","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","locale","_hoisted_13","_hoisted_14","author","_","_createCommentVNode"],"sources":["C:\\Projetos\\translator-manager-frontend\\src\\views\\DocumentView.vue"],"sourcesContent":["<template>\r\n        <div class=\"container\">\r\n          <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n            <h2>{{ $t('document.title') }}</h2>\r\n            <div class=\"d-flex align-items-center\">\r\n              <div class=\"me-3\">\r\n                <label class=\"form-label me-2\">{{ $t('common.itemsPerPage') }}</label>\r\n                <select class=\"form-select form-select-sm d-inline-block w-auto\" v-model=\"documents.size\" @change=\"loadDocuments(0)\">\r\n                  <option value=\"5\">5</option>\r\n                  <option value=\"10\">10</option>\r\n                  <option value=\"20\">20</option>\r\n                  <option value=\"50\">50</option>\r\n                </select>\r\n              </div>\r\n              <button class=\"btn btn-primary me-2\" @click=\"showAddModal\">\r\n                {{ $t('document.newDocument') }}\r\n              </button>\r\n              <label class=\"btn btn-secondary\">\r\n                {{ $t('common.uploadCSV') }}\r\n                <input type=\"file\" accept=\".csv\" class=\"d-none\" @change=\"handleFileUpload\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <TableView\r\n              :headers=\"headers\"\r\n              :fields=\"fields\"\r\n              :items=\"documents.content\"\r\n              :actions=\"actions\"\r\n              :currentPage=\"documents.number\"\r\n              :pageSize=\"documents.size\"\r\n          />\r\n\r\n          <Pagination\r\n              :currentPage=\"documents.number\"\r\n              :totalPages=\"documents.totalPages\"\r\n              :first=\"documents.first\"\r\n              :last=\"documents.last\"\r\n              @change=\"changePage\"\r\n          />\r\n\r\n          <ModalView\r\n              v-if=\"showModal\"\r\n              :title=\"editingDocument.id ? $t('document.editDocument') : $t('document.newDocument')\"\r\n              @close=\"closeModal\"\r\n              @save=\"saveDocument\"\r\n          >\r\n            <form>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.subject') }}</label>\r\n                <input v-model=\"editingDocument.subject\" type=\"text\" class=\"form-control\" required />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.content') }}</label>\r\n                <textarea v-model=\"editingDocument.content\" class=\"form-control\" required></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.locale') }}</label>\r\n                <input v-model=\"editingDocument.locale\" type=\"text\" class=\"form-control\" />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.author') }}</label>\r\n                <input v-model=\"editingDocument.author\" type=\"text\" class=\"form-control\" required />\r\n              </div>\r\n            </form>\r\n          </ModalView>\r\n        </div>\r\n      </template>\r\n\r\n      <script>\r\n      import TableView from '@/components/TableView.vue';\r\n      import PaginationView from '@/components/PaginationView.vue';\r\n      import ModalView from '@/components/ModalView.vue';\r\n      import DocumentService from '@/services/DocumentService.js';\r\n\r\n      export default {\r\n        components: { TableView, Pagination: PaginationView, ModalView },\r\n        data() {\r\n          return {\r\n            documents: { content: [], number: 0, size: 10, totalPages: 0, first: true, last: true },\r\n            showModal: false,\r\n            editingDocument: { subject: '', content: '', locale: '', author: '' },\r\n            headers: [\r\n              { label: '#', style: 'width: 50px' },\r\n              { label: this.$t('document.subject') },\r\n              { label: this.$t('document.locale') },\r\n              { label: this.$t('document.author') },\r\n              { label: this.$t('document.translator') },\r\n              { label: this.$t('common.actions'), style: 'width: 100px' },\r\n            ],\r\n            fields: ['index', 'subject', 'locale', 'author', 'translator.name'],\r\n            actions: [\r\n              {\r\n                class: 'btn btn-sm btn-primary me-2',\r\n                icon: 'bi bi-pencil',\r\n                title: this.$t('common.edit'),\r\n                handler: this.editDocument,\r\n              },\r\n              {\r\n                class: 'btn btn-sm btn-danger',\r\n                icon: 'bi bi-x-lg',\r\n                title: this.$t('common.delete'),\r\n                handler: this.deleteDocument,\r\n              },\r\n            ],\r\n          };\r\n        },\r\n        created() {\r\n          this.loadDocuments();\r\n        },\r\n        methods: {\r\n          async loadDocuments(page = 0) {\r\n            try {\r\n              const response = await DocumentService.getAll(page, this.documents.size);\r\n              this.documents = response.data;\r\n            } catch (error) {\r\n              console.error('Erro ao carregar documentos:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao carregar documentos.');\r\n            }\r\n          },\r\n          changePage(page) {\r\n            this.loadDocuments(page);\r\n          },\r\n          showAddModal() {\r\n            this.editingDocument = { subject: '', content: '', locale: '', author: '' };\r\n            this.showModal = true;\r\n          },\r\n          editDocument(document) {\r\n            this.editingDocument = { ...document };\r\n            this.showModal = true;\r\n          },\r\n          async saveDocument() {\r\n            try {\r\n              await DocumentService.save(this.editingDocument);\r\n              this.closeModal();\r\n              this.loadDocuments();\r\n            } catch (error) {\r\n              console.error('Erro ao salvar documento:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao salvar documento.');\r\n            }\r\n          },\r\n          async deleteDocument(document) {\r\n            try {\r\n              await DocumentService.delete(document.id);\r\n              this.loadDocuments();\r\n            } catch (error) {\r\n              console.error('Erro ao deletar documento:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao deletar documento.');\r\n            }\r\n          },\r\n          async handleFileUpload(event) {\r\n            try {\r\n              const file = event.target.files[0];\r\n              await DocumentService.upload(file);\r\n              this.loadDocuments();\r\n            } catch (error) {\r\n              console.error('Erro ao fazer upload do arquivo:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao fazer upload do arquivo.');\r\n            }\r\n          },\r\n          closeModal() {\r\n            this.showModal = false;\r\n          },\r\n        },\r\n      };\r\n      </script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}