{"ast":null,"code":"import TableView from '@/components/TableView.vue';\nimport PaginationView from '@/components/PaginationView.vue';\nimport ModalView from '@/components/ModalView.vue';\nimport DocumentService from '@/services/DocumentService.js';\nexport default {\n  components: {\n    TableView,\n    Pagination: PaginationView,\n    ModalView\n  },\n  data() {\n    return {\n      documents: {\n        content: [],\n        number: 0,\n        size: 10,\n        totalPages: 0,\n        first: true,\n        last: true\n      },\n      showModal: false,\n      editingDocument: {\n        subject: '',\n        content: '',\n        locale: '',\n        author: ''\n      },\n      headers: [{\n        label: '#',\n        style: 'width: 50px'\n      }, {\n        label: this.$t('document.subject')\n      }, {\n        label: this.$t('document.locale')\n      }, {\n        label: this.$t('document.author')\n      }, {\n        label: this.$t('document.translator')\n      }, {\n        label: this.$t('common.actions'),\n        style: 'width: 100px'\n      }],\n      fields: ['index', 'subject', 'locale', 'author', 'translator.name'],\n      actions: [{\n        class: 'btn btn-sm btn-primary me-2',\n        icon: 'bi bi-pencil',\n        title: this.$t('common.edit'),\n        handler: this.editDocument\n      }, {\n        class: 'btn btn-sm btn-danger',\n        icon: 'bi bi-x-lg',\n        title: this.$t('common.delete'),\n        handler: this.deleteDocument\n      }]\n    };\n  },\n  created() {\n    this.loadDocuments();\n  },\n  methods: {\n    async loadDocuments(page = 0) {\n      try {\n        const response = await DocumentService.getAll(page, this.documents.size);\n        this.documents = response.data;\n      } catch (error) {\n        console.error('Erro ao carregar documentos:', error.response?.data || error.message);\n        alert(error.response?.data || 'Erro ao carregar documentos.');\n      }\n    },\n    changePage(page) {\n      this.loadDocuments(page);\n    },\n    showAddModal() {\n      this.editingDocument = {\n        subject: '',\n        content: '',\n        locale: '',\n        author: ''\n      };\n      this.showModal = true;\n    },\n    editDocument(document) {\n      this.editingDocument = {\n        ...document\n      };\n      this.showModal = true;\n    },\n    async saveDocument() {\n      try {\n        await DocumentService.save(this.editingDocument);\n        this.closeModal();\n        this.loadDocuments();\n      } catch (error) {\n        console.error('Erro ao salvar documento:', error.response?.data || error.message);\n        alert(error.response?.data || 'Erro ao salvar documento.');\n      }\n    },\n    async deleteDocument(document) {\n      try {\n        await DocumentService.delete(document.id);\n        this.loadDocuments();\n      } catch (error) {\n        console.error('Erro ao deletar documento:', error.response?.data || error.message);\n        alert(error.response?.data || 'Erro ao deletar documento.');\n      }\n    },\n    async handleFileUpload(event) {\n      try {\n        const file = event.target.files[0];\n        await DocumentService.upload(file);\n        this.loadDocuments();\n      } catch (error) {\n        console.error('Erro ao fazer upload do arquivo:', error.response?.data || error.message);\n        alert((error.response?.data || 'Erro ao fazer upload do arquivo.') + '.Verifique se possui tradutores para todos os idiomas do arquivo.');\n        location.reload(true);\n      }\n    },\n    closeModal() {\n      this.showModal = false;\n    }\n  }\n};","map":{"version":3,"names":["TableView","PaginationView","ModalView","DocumentService","components","Pagination","data","documents","content","number","size","totalPages","first","last","showModal","editingDocument","subject","locale","author","headers","label","style","$t","fields","actions","class","icon","title","handler","editDocument","deleteDocument","created","loadDocuments","methods","page","response","getAll","error","console","message","alert","changePage","showAddModal","document","saveDocument","save","closeModal","delete","id","handleFileUpload","event","file","target","files","upload","location","reload"],"sources":["C:\\Projetos\\desafio-bureau-works\\translator-manager-frontend\\src\\views\\DocumentView.vue"],"sourcesContent":["<template>\r\n        <div class=\"container\">\r\n          <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n            <h2>{{ $t('document.title') }}</h2>\r\n            <div class=\"d-flex align-items-center\">\r\n              <div class=\"me-3\">\r\n                <label class=\"form-label me-2\">{{ $t('common.itemsPerPage') }}</label>\r\n                <select class=\"form-select form-select-sm d-inline-block w-auto\" v-model=\"documents.size\" @change=\"loadDocuments(0)\">\r\n                  <option value=\"5\">5</option>\r\n                  <option value=\"10\">10</option>\r\n                  <option value=\"20\">20</option>\r\n                  <option value=\"50\">50</option>\r\n                </select>\r\n              </div>\r\n              <button class=\"btn btn-primary me-2\" @click=\"showAddModal\">\r\n                {{ $t('document.newDocument') }}\r\n              </button>\r\n              <label class=\"btn btn-secondary\">\r\n                {{ $t('common.uploadCSV') }}\r\n                <input type=\"file\" accept=\".csv\" class=\"d-none\" @change=\"handleFileUpload\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <TableView\r\n              :headers=\"headers\"\r\n              :fields=\"fields\"\r\n              :items=\"documents.content\"\r\n              :actions=\"actions\"\r\n              :currentPage=\"documents.number\"\r\n              :pageSize=\"documents.size\"\r\n          />\r\n\r\n          <Pagination\r\n              :currentPage=\"documents.number\"\r\n              :totalPages=\"documents.totalPages\"\r\n              :first=\"documents.first\"\r\n              :last=\"documents.last\"\r\n              @change=\"changePage\"\r\n          />\r\n\r\n          <ModalView\r\n              v-if=\"showModal\"\r\n              :title=\"editingDocument.id ? $t('document.editDocument') : $t('document.newDocument')\"\r\n              @close=\"closeModal\"\r\n              @save=\"saveDocument\"\r\n          >\r\n            <form>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.subject') }}</label>\r\n                <input v-model=\"editingDocument.subject\" type=\"text\" class=\"form-control\" required />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.content') }}</label>\r\n                <textarea v-model=\"editingDocument.content\" class=\"form-control\" required></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.locale') }}</label>\r\n                <input v-model=\"editingDocument.locale\" type=\"text\" class=\"form-control\" />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">{{ $t('document.author') }}</label>\r\n                <input v-model=\"editingDocument.author\" type=\"text\" class=\"form-control\" required />\r\n              </div>\r\n            </form>\r\n          </ModalView>\r\n        </div>\r\n      </template>\r\n\r\n      <script>\r\n      import TableView from '@/components/TableView.vue';\r\n      import PaginationView from '@/components/PaginationView.vue';\r\n      import ModalView from '@/components/ModalView.vue';\r\n      import DocumentService from '@/services/DocumentService.js';\r\n\r\n      export default {\r\n        components: { TableView, Pagination: PaginationView, ModalView },\r\n        data() {\r\n          return {\r\n            documents: { content: [], number: 0, size: 10, totalPages: 0, first: true, last: true },\r\n            showModal: false,\r\n            editingDocument: { subject: '', content: '', locale: '', author: '' },\r\n            headers: [\r\n              { label: '#', style: 'width: 50px' },\r\n              { label: this.$t('document.subject') },\r\n              { label: this.$t('document.locale') },\r\n              { label: this.$t('document.author') },\r\n              { label: this.$t('document.translator') },\r\n              { label: this.$t('common.actions'), style: 'width: 100px' },\r\n            ],\r\n            fields: ['index', 'subject', 'locale', 'author', 'translator.name'],\r\n            actions: [\r\n              {\r\n                class: 'btn btn-sm btn-primary me-2',\r\n                icon: 'bi bi-pencil',\r\n                title: this.$t('common.edit'),\r\n                handler: this.editDocument,\r\n              },\r\n              {\r\n                class: 'btn btn-sm btn-danger',\r\n                icon: 'bi bi-x-lg',\r\n                title: this.$t('common.delete'),\r\n                handler: this.deleteDocument,\r\n              },\r\n            ],\r\n          };\r\n        },\r\n        created() {\r\n          this.loadDocuments();\r\n        },\r\n        methods: {\r\n          async loadDocuments(page = 0) {\r\n            try {\r\n              const response = await DocumentService.getAll(page, this.documents.size);\r\n              this.documents = response.data;\r\n            } catch (error) {\r\n              console.error('Erro ao carregar documentos:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao carregar documentos.');\r\n            }\r\n          },\r\n          changePage(page) {\r\n            this.loadDocuments(page);\r\n          },\r\n          showAddModal() {\r\n            this.editingDocument = { subject: '', content: '', locale: '', author: '' };\r\n            this.showModal = true;\r\n          },\r\n          editDocument(document) {\r\n            this.editingDocument = { ...document };\r\n            this.showModal = true;\r\n          },\r\n          async saveDocument() {\r\n            try {\r\n              await DocumentService.save(this.editingDocument);\r\n              this.closeModal();\r\n              this.loadDocuments();\r\n            } catch (error) {\r\n              console.error('Erro ao salvar documento:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao salvar documento.');\r\n            }\r\n          },\r\n          async deleteDocument(document) {\r\n            try {\r\n              await DocumentService.delete(document.id);\r\n              this.loadDocuments();\r\n            } catch (error) {\r\n              console.error('Erro ao deletar documento:', error.response?.data || error.message);\r\n              alert(error.response?.data || 'Erro ao deletar documento.');\r\n            }\r\n          },\r\n          async handleFileUpload(event) {\r\n            try {\r\n              const file = event.target.files[0];\r\n              await DocumentService.upload(file);\r\n              this.loadDocuments();\r\n            } catch (error) {\r\n              console.error('Erro ao fazer upload do arquivo:', error.response?.data || error.message);\r\n              alert((error.response?.data || 'Erro ao fazer upload do arquivo.') +\r\n                  '.Verifique se possui tradutores para todos os idiomas do arquivo.');\r\n\r\n              location.reload(true);\r\n            }\r\n          },\r\n          closeModal() {\r\n            this.showModal = false;\r\n          },\r\n        },\r\n      };\r\n      </script>"],"mappings":"AAsEM,OAAOA,SAAQ,MAAO,4BAA4B;AAClD,OAAOC,cAAa,MAAO,iCAAiC;AAC5D,OAAOC,SAAQ,MAAO,4BAA4B;AAClD,OAAOC,eAAc,MAAO,+BAA+B;AAE3D,eAAe;EACbC,UAAU,EAAE;IAAEJ,SAAS;IAAEK,UAAU,EAAEJ,cAAc;IAAEC;EAAU,CAAC;EAChEI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,MAAM,EAAE,CAAC;QAAEC,IAAI,EAAE,EAAE;QAAEC,UAAU,EAAE,CAAC;QAAEC,KAAK,EAAE,IAAI;QAAEC,IAAI,EAAE;MAAK,CAAC;MACvFC,SAAS,EAAE,KAAK;MAChBC,eAAe,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAER,OAAO,EAAE,EAAE;QAAES,MAAM,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAG,CAAC;MACrEC,OAAO,EAAE,CACP;QAAEC,KAAK,EAAE,GAAG;QAAEC,KAAK,EAAE;MAAc,CAAC,EACpC;QAAED,KAAK,EAAE,IAAI,CAACE,EAAE,CAAC,kBAAkB;MAAE,CAAC,EACtC;QAAEF,KAAK,EAAE,IAAI,CAACE,EAAE,CAAC,iBAAiB;MAAE,CAAC,EACrC;QAAEF,KAAK,EAAE,IAAI,CAACE,EAAE,CAAC,iBAAiB;MAAE,CAAC,EACrC;QAAEF,KAAK,EAAE,IAAI,CAACE,EAAE,CAAC,qBAAqB;MAAE,CAAC,EACzC;QAAEF,KAAK,EAAE,IAAI,CAACE,EAAE,CAAC,gBAAgB,CAAC;QAAED,KAAK,EAAE;MAAe,CAAC,CAC5D;MACDE,MAAM,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,CAAC;MACnEC,OAAO,EAAE,CACP;QACEC,KAAK,EAAE,6BAA6B;QACpCC,IAAI,EAAE,cAAc;QACpBC,KAAK,EAAE,IAAI,CAACL,EAAE,CAAC,aAAa,CAAC;QAC7BM,OAAO,EAAE,IAAI,CAACC;MAChB,CAAC,EACD;QACEJ,KAAK,EAAE,uBAAuB;QAC9BC,IAAI,EAAE,YAAY;QAClBC,KAAK,EAAE,IAAI,CAACL,EAAE,CAAC,eAAe,CAAC;QAC/BM,OAAO,EAAE,IAAI,CAACE;MAChB,CAAC;IAEL,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,aAAaA,CAACE,IAAG,GAAI,CAAC,EAAE;MAC5B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMhC,eAAe,CAACiC,MAAM,CAACF,IAAI,EAAE,IAAI,CAAC3B,SAAS,CAACG,IAAI,CAAC;QACxE,IAAI,CAACH,SAAQ,GAAI4B,QAAQ,CAAC7B,IAAI;MAChC,EAAE,OAAO+B,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK+B,KAAK,CAACE,OAAO,CAAC;QACpFC,KAAK,CAACH,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK,8BAA8B,CAAC;MAC/D;IACF,CAAC;IACDmC,UAAUA,CAACP,IAAI,EAAE;MACf,IAAI,CAACF,aAAa,CAACE,IAAI,CAAC;IAC1B,CAAC;IACDQ,YAAYA,CAAA,EAAG;MACb,IAAI,CAAC3B,eAAc,GAAI;QAAEC,OAAO,EAAE,EAAE;QAAER,OAAO,EAAE,EAAE;QAAES,MAAM,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAG,CAAC;MAC3E,IAAI,CAACJ,SAAQ,GAAI,IAAI;IACvB,CAAC;IACDe,YAAYA,CAACc,QAAQ,EAAE;MACrB,IAAI,CAAC5B,eAAc,GAAI;QAAE,GAAG4B;MAAS,CAAC;MACtC,IAAI,CAAC7B,SAAQ,GAAI,IAAI;IACvB,CAAC;IACD,MAAM8B,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAMzC,eAAe,CAAC0C,IAAI,CAAC,IAAI,CAAC9B,eAAe,CAAC;QAChD,IAAI,CAAC+B,UAAU,CAAC,CAAC;QACjB,IAAI,CAACd,aAAa,CAAC,CAAC;MACtB,EAAE,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK+B,KAAK,CAACE,OAAO,CAAC;QACjFC,KAAK,CAACH,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK,2BAA2B,CAAC;MAC5D;IACF,CAAC;IACD,MAAMwB,cAAcA,CAACa,QAAQ,EAAE;MAC7B,IAAI;QACF,MAAMxC,eAAe,CAAC4C,MAAM,CAACJ,QAAQ,CAACK,EAAE,CAAC;QACzC,IAAI,CAAChB,aAAa,CAAC,CAAC;MACtB,EAAE,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK+B,KAAK,CAACE,OAAO,CAAC;QAClFC,KAAK,CAACH,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK,4BAA4B,CAAC;MAC7D;IACF,CAAC;IACD,MAAM2C,gBAAgBA,CAACC,KAAK,EAAE;MAC5B,IAAI;QACF,MAAMC,IAAG,GAAID,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;QAClC,MAAMlD,eAAe,CAACmD,MAAM,CAACH,IAAI,CAAC;QAClC,IAAI,CAACnB,aAAa,CAAC,CAAC;MACtB,EAAE,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK+B,KAAK,CAACE,OAAO,CAAC;QACxFC,KAAK,CAAC,CAACH,KAAK,CAACF,QAAQ,EAAE7B,IAAG,IAAK,kCAAkC,IAC7D,mEAAmE,CAAC;QAExEiD,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC;MACvB;IACF,CAAC;IACDV,UAAUA,CAAA,EAAG;MACX,IAAI,CAAChC,SAAQ,GAAI,KAAK;IACxB;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}